"use strict";(()=>{var e={};e.id=7203,e.ids=[7203],e.modules={3969:(e,t,s)=>{s.r(t),s.d(t,{config:()=>w,default:()=>f,getServerSideProps:()=>k,getStaticPaths:()=>_,getStaticProps:()=>N,reportWebVitals:()=>S,routeModule:()=>q,unstable_getServerProps:()=>E,unstable_getServerSideProps:()=>Z,unstable_getStaticParams:()=>M,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>C});var a={};s.r(a),s.d(a,{default:()=>v});var r=s(7093),l=s(5244),n=s(1323),i=s(7645),d=s(6814),c=s(997),o=s(6689),x=s(775),m=s(5993);let u=(0,s(4370).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var p=s(2770),g=s(8453),b=s(4672),h=s(4676),y=s(5451),j=s(6562);let v=()=>{let[e,t]=(0,o.useState)([]),[s,a]=(0,o.useState)(!1),[r,l]=(0,o.useState)(null),[n,i]=(0,o.useState)(!0),[d,v]=(0,o.useState)(""),[f,N]=(0,o.useState)(""),[_,k]=(0,o.useState)(""),[w,S]=(0,o.useState)({student_name:"",student_id:"",class:"",section:"",exam_type:"unit_test_1",academic_year:new Date().getFullYear().toString(),subjects:[{subject:"Kannada",marks_obtained:0,max_marks:100},{subject:"English",marks_obtained:0,max_marks:100},{subject:"Hindi",marks_obtained:0,max_marks:100},{subject:"Mathematics",marks_obtained:0,max_marks:100},{subject:"Science",marks_obtained:0,max_marks:100},{subject:"Social Science",marks_obtained:0,max_marks:100}]}),C=["6th","7th","8th","9th","10th"],P=[{value:"unit_test_1",label:"Unit Test 1"},{value:"unit_test_2",label:"Unit Test 2"},{value:"mid_term",label:"Mid Term Exam"},{value:"final_exam",label:"Final Exam"},{value:"annual_exam",label:"Annual Exam"}];(0,o.useEffect)(()=>{M()},[]);let M=async()=>{try{i(!0);let e=await fetch("/api/results");if(e.ok){let s=await e.json();t(s)}}catch(e){console.error("Error fetching results:",e)}finally{i(!1)}},E=e=>e>=90?"A+":e>=80?"A":e>=70?"B+":e>=60?"B":e>=50?"C+":e>=40?"C":e>=35?"D":"F",Z=(e,t)=>E(e/t*100),q=async e=>{e.preventDefault();try{let e=w.subjects.reduce((e,t)=>e+t.marks_obtained,0),t=w.subjects.reduce((e,t)=>e+t.max_marks,0),s=e/t*100,a=E(s),l=w.subjects.map(e=>({...e,grade:Z(e.marks_obtained,e.max_marks)})),n={...w,subjects:l,total_marks:e,percentage:Math.round(100*s)/100,grade:a},i=r?`/api/results?id=${r.id}`:"/api/results";(await fetch(i,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok&&(await M(),T())}catch(e){console.error("Error saving result:",e)}},A=e=>{l(e),S({student_name:e.student_name,student_id:e.student_id,class:e.class,section:e.section,exam_type:e.exam_type,academic_year:e.academic_year,subjects:e.subjects.map(e=>({subject:e.subject,marks_obtained:e.marks_obtained,max_marks:e.max_marks}))}),a(!0)},D=async e=>{if(confirm("Are you sure you want to delete this result?"))try{(await fetch(`/api/results?id=${e}`,{method:"DELETE"})).ok&&await M()}catch(e){console.error("Error deleting result:",e)}},T=()=>{S({student_name:"",student_id:"",class:"",section:"",exam_type:"unit_test_1",academic_year:new Date().getFullYear().toString(),subjects:[{subject:"Kannada",marks_obtained:0,max_marks:100},{subject:"English",marks_obtained:0,max_marks:100},{subject:"Hindi",marks_obtained:0,max_marks:100},{subject:"Mathematics",marks_obtained:0,max_marks:100},{subject:"Science",marks_obtained:0,max_marks:100},{subject:"Social Science",marks_obtained:0,max_marks:100}]}),l(null),a(!1)},R=(e,t,s)=>{let a=[...w.subjects];a[e][t]=s,S({...w,subjects:a})},F=e.filter(e=>{let t=e.student_name.toLowerCase().includes(d.toLowerCase())||e.student_id.toLowerCase().includes(d.toLowerCase()),s=!f||e.class===f,a=!_||e.exam_type===_;return t&&s&&a}),I=e=>({"A+":"bg-green-100 text-green-800",A:"bg-green-100 text-green-800","B+":"bg-blue-100 text-blue-800",B:"bg-blue-100 text-blue-800","C+":"bg-yellow-100 text-yellow-800",C:"bg-yellow-100 text-yellow-800",D:"bg-orange-100 text-orange-800",F:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return n?c.jsx(m.Z,{children:c.jsx(x.Z,{children:c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})})}):c.jsx(m.Z,{children:c.jsx(x.Z,{children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Results Management"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Manage student examination results by class"})]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsxs)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[c.jsx(u,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,c.jsxs)("button",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[c.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,c.jsxs)("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[c.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Add Result"]})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Student"}),(0,c.jsxs)("div",{className:"relative",children:[c.jsx(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx("input",{type:"text",value:d,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Name or ID"})]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),(0,c.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Classes"}),C.map(e=>c.jsx("option",{value:e,children:e},e))]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Type"}),(0,c.jsxs)("select",{value:_,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Exams"}),P.map(e=>c.jsx("option",{value:e.value,children:e.label},e.value))]})]}),c.jsx("div",{className:"flex items-end",children:c.jsx("button",{onClick:()=>{v(""),N(""),k("")},className:"w-full bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Clear Filters"})})]})}),s&&(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Edit Result":"Add New Result"}),c.jsx("button",{onClick:T,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,c.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Name *"}),c.jsx("input",{type:"text",value:w.student_name,onChange:e=>S({...w,student_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student ID *"}),c.jsx("input",{type:"text",value:w.student_id,onChange:e=>S({...w,student_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),(0,c.jsxs)("select",{value:w.class,onChange:e=>S({...w,class:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),C.map(e=>c.jsx("option",{value:e,children:e},e))]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section *"}),(0,c.jsxs)("select",{value:w.section,onChange:e=>S({...w,section:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"",children:"Select Section"}),["A","B","C","D"].map(e=>c.jsx("option",{value:e,children:e},e))]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Type *"}),c.jsx("select",{value:w.exam_type,onChange:e=>S({...w,exam_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:P.map(e=>c.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year *"}),c.jsx("input",{type:"text",value:w.academic_year,onChange:e=>S({...w,academic_year:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject Marks"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.subjects.map((e,t)=>(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:e.subject}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Marks Obtained"}),c.jsx("input",{type:"number",value:e.marks_obtained,onChange:e=>R(t,"marks_obtained",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:e.max_marks})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Max Marks"}),c.jsx("input",{type:"number",value:e.max_marks,onChange:e=>R(t,"max_marks",parseInt(e.target.value)||100),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]})]}),(0,c.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Grade: ",Z(e.marks_obtained,e.max_marks)]})]},t))})]}),(0,c.jsxs)("div",{className:"flex space-x-4",children:[c.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:r?"Update Result":"Save Result"}),c.jsx("button",{type:"button",onClick:T,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Details"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class & Section"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam Type"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Marks"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(e=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.student_name}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.student_id]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"text-sm text-gray-900",children:[e.class," - ",e.section]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:P.find(t=>t.value===e.exam_type)?.label||e.exam_type})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:e.total_marks})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"text-sm text-gray-900",children:[e.percentage,"%"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I(e.grade)}`,children:e.grade})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>A(e),className:"text-blue-600 hover:text-blue-900",children:c.jsx(h.Z,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>D(e.id),className:"text-red-600 hover:text-red-900",children:c.jsx(y.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),0===F.length&&(0,c.jsxs)("div",{className:"text-center py-12",children:[c.jsx(j.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),c.jsx("p",{className:"text-gray-600",children:"Add student results to get started."})]})]})})})},f=(0,n.l)(a,"default"),N=(0,n.l)(a,"getStaticProps"),_=(0,n.l)(a,"getStaticPaths"),k=(0,n.l)(a,"getServerSideProps"),w=(0,n.l)(a,"config"),S=(0,n.l)(a,"reportWebVitals"),C=(0,n.l)(a,"unstable_getStaticProps"),P=(0,n.l)(a,"unstable_getStaticPaths"),M=(0,n.l)(a,"unstable_getStaticParams"),E=(0,n.l)(a,"unstable_getServerProps"),Z=(0,n.l)(a,"unstable_getServerSideProps"),q=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/results",pathname:"/admin/results",bundlePath:"",filename:""},components:{App:d.default,Document:i.default},userland:a})},8453:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(4370).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4672:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(4370).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5451:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(4370).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2770:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(4370).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[6859,9891,468,5741],()=>s(3969));module.exports=a})();